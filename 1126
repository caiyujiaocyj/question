    res_for_vis = {}
    res_for_vis['ind_pts'] = instance_id  # Overall indices
    res_for_vis['results'] = []
    for i_seg, seg in enumerate(segs):

        # 从 segment 中取 cluster label（lst_id_cluster 是个 list，正常长度为 1）
        if hasattr(seg, "lst_id_cluster") and len(seg.lst_id_cluster) > 0:
            seg_cluster_label = int(seg.lst_id_cluster[0])
        else:
            seg_cluster_label = -1  # 保险：如果没填 lst_id_cluster

        # 构造与 npz 一致的 cluster_id：blockName-ClusterLabel
        if seg_cluster_label >= 0:
            seg_cluster_id = f"{block_name}-{seg_cluster_label}"
        else:
            seg_cluster_id = f"{block_name}-seg{i_seg}"

        # 把 id 挂到 segment 对象上，方便后续 IFC 直接用
        seg.cluster_label = seg_cluster_label
        seg.cluster_id = seg_cluster_id

        res_for_vis['results'].append(dict(
            id_in_block=i_seg,  # The local instance id in this block.
            cluster_label=seg_cluster_label,
            cluster_id=seg_cluster_id,
            pc_clustered=surf[seg.ind_clustered],
            ind_clustered=seg.ind_clustered,
            ind_inlier=seg.ind_inlier,
            d=d,
            start=seg.centerline_start,
            end=seg.centerline_end,
            radius=seg.radius,
            length=seg.length,
        ))
