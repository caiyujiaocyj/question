import numpy as np
import pipe_function as pn  # 也就是你当前的 pipe_function

def fit_from_saved_cluster(cluster_npz_path):
    data = np.load(cluster_npz_path)
    c = data["centerline"]
    r = data["radii"]
    d = data["dirs"]
    surf = data["surf"]

    # 单个 cluster 的 label 全部置为 0 即可
    labels = np.zeros(len(c), dtype=int)

    segs, _ = pn.extract_segments(c, r, d, labels, surf)
    segs, raw_r, new_r = pn.filter_segments(segs)

    # 一般来说这里 segs 只有一根 cylinder
    return segs
